/*
 * Copyright (C) 2009-2020 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","sap/m/MessageBox","sap/ui/generic/app/navigation/service/NavigationHandler","sap/ui/generic/app/navigation/service/SelectionVariant"],function(O,M,N,S){"use strict";return{onBeforePopoverOpens:function(e,t){var p=e.getParameters();var s=e.getSource();var i=p.originalId;var o=new sap.ui.generic.app.navigation.service.SelectionVariant(t.oCurrSmartFilterBar.getDataSuiteFormat());this.processNullNaviValue(i,o,s,t);this.addMoreNavParameters(p,o,t);this.addCurrency(o,p,t);var n=this.setDateForDiffPaymentDay(p,o,s,t);if(t.getView().byId(p.originalId)){this.setOverduePlanningLevel(p,o,s,t);}this.removeNotUsedContextNavParameters(p);this.mapFieldsToCCFI(p,o,s,t);this.mapFieldsToCashRequest(p,o,s,t);this.deriveLiquidityItem(o,p,t);p.semanticAttributes.noNav=n;t.oNavigationHandler.processBeforeSmartLinkPopoverOpens(p,o.toJSONString(),this.oInnerAppData);},onTargetObtained:function(e,t){var p=e.getParameters();var s=e.getSource();var a=[];var f=this.addContentToPopOver(p,s,t);if((p.semanticAttributes.noNav&&s.getText()==="-")||(t.getView().getViewName()==="fin.cash.flow.analyzer.view.LiquidityItemHierarchy"&&p.semanticAttributes.IsData!=="X")){p.actions=a;}else{jQuery.each(p.actions,function(b,v){var c=v.getHref();if(t.getView().getViewName()!=="fin.cash.flow.analyzer.view.LiquidityItemHierarchy"){if((c.search(/BankAccount-transferFrom\?/)!==-1)||(c.search(/BankAccount-transferTo\?/)!==-1)){a.push(v);}}if((c.search(/BankAccount-createCashRequestReceiving\?/)!==-1)){a.push(v);}if((c.search(/BankAccount-createCashRequestSending\?/)!==-1)){a.push(v);}if((c.search(/BankAccount-createMMFCashRequestReceiving\?/)!==-1)){a.push(v);}if((c.search(/BankAccount-createMMFCashRequestSending\?/)!==-1)){a.push(v);}});var o=new sap.ui.generic.app.navigation.service.SelectionVariant(t.oCurrSmartFilterBar.getDataSuiteFormat());var i=t.getView().getModel("Scaling").getData().isBankCurrency;p.actions=this.provideAdditionalParameter(a,o,i);}var P="";if(s.getProperty("text")){P=s.getProperty("text");}p.show(P,null,p.actions,f);},onPopoverLinkPressed:function(e,t){},onBeforePopoverOpensBACC:function(e,t){var p=e.getParameters();if(t.sHierType==="BKH"){if(p.semanticAttributes.isData&&p.semanticAttributes.isData==="X"&&p.semanticAttributes.newDataNode!==true){var s=new sap.ui.generic.app.navigation.service.SelectionVariant(t.oCurrSmartFilterBar.getDataSuiteFormat());this.addMoreNavParametersBACC(p,s);this.removeNotUsedContextNavParameters(p);t.oNavigationHandler.processBeforeSmartLinkPopoverOpens(p,s.toJSONString(),this.oInnerAppData);}}else{s=new sap.ui.generic.app.navigation.service.SelectionVariant(t.oCurrSmartFilterBar.getDataSuiteFormat());this.addMoreNavParametersBACC(p,s);this.removeNotUsedContextNavParameters(p);t.oNavigationHandler.processBeforeSmartLinkPopoverOpens(p,s.toJSONString(),this.oInnerAppData);}},onTargetObtainedBACC:function(e,t){var p=e.getParameters();var s=e.getSource();var a=[];var f=new sap.ui.layout.form.SimpleForm({ColumnsL:2});f.setLayout("ResponsiveGridLayout");jQuery.each(p.actions,function(i,v){var b=v.getHref();if(b.search(/BankStatement-manage/)!==-1){a.push(v);}if(b.search(/BankAccount-manageMasterData\?/)!==-1){a.push(v);}});p.actions=this.provideAdditionalParameterBACC(a);var P="";if(s.getProperty("text")){P=s.getProperty("text");}p.show(P,null,p.actions,f);},onPopoverLinkPressedBACC:function(e,t){},onBeforePopoverOpensBANK:function(e,t){var p=e.getParameters();var s=e.getSource();var i=p.originalId;var o=new sap.ui.generic.app.navigation.service.SelectionVariant(t.oCurrSmartFilterBar.getDataSuiteFormat());this.addMoreNavParametersBACC(p,o);this.removeNotUsedContextNavParameters(p);t.oNavigationHandler.processBeforeSmartLinkPopoverOpens(p,o.toJSONString(),this.oInnerAppData);},onTargetObtainedBANK:function(e,t){var p=e.getParameters();var s=e.getSource();var a=[];var f=new sap.ui.layout.form.SimpleForm({ColumnsL:2});f.setLayout("ResponsiveGridLayout");jQuery.each(p.actions,function(i,v){var b=v.getHref();if(b.search(/BankAccount-manageBank\?/)!==-1){a.push(v);}});p.actions=this.provideAdditionalParameterBACC(a);var P="";if(s.getProperty("text")){P=s.getProperty("text");}p.show(P,null,p.actions,f);},onPopoverLinkPressedBANK:function(e,t){},onTargetObtainedCommon:function(e,t){var p=e.getParameters();var s=e.getSource();var a=[];var f=new sap.ui.layout.form.SimpleForm({ColumnsL:2});f.setLayout("ResponsiveGridLayout");jQuery.each(p.actions,function(i,v){a.push(v);});p.actions=this.provideAdditionalParameterBACC(a);var P="";if(s.getProperty("text")){P=s.getProperty("text");}p.show(P,null,p.actions,f);},processNullNaviValue:function(i,s,o,t){var a=t.getView().byId(i);if(a){var c=a.getBindingContext();var b=c.getObject(c.getPath());if(b.BankAccount===""){if(s.getSelectOption("BankAccount")){s.removeSelectOption("BankAccount");}s.addSelectOption("BankAccount","I","EQ","");}if(b.GLAccount===""){if(s.getSelectOption("GLAccount")){s.removeSelectOption("GLAccount");}s.addSelectOption("GLAccount","I","EQ","");}}},addMoreNavParameters:function(p,s,t){s.addParameter("TransferFrom","X");s.addParameter("TransferTo","X");s.addParameter("preferredMode","create");var C=t.getView().getViewName();var h=new Date();switch(C){case"fin.cash.flow.analyzer.view.Worklist_D":case"fin.cash.flow.analyzer.view.Worklist":h=t.getView().byId("idHistoricalTimeStamp").getDateValue();break;case"fin.cash.flow.analyzer.view.BankAccountHierarchy":h=t.getView().byId("idHistoricalTimeStampForBA").getDateValue();break;case"fin.cash.flow.analyzer.view.LiquidityItemHierarchy":h=t.getView().byId("idHistoricalTimeStampForLQ").getDateValue();break;}if(h===undefined||h===""||h===null){h=new Date();}s.addParameter("HistoricalTimeStamp",h.toJSON());var r=s.getParameter("ReleaseFlag");if(r===undefined){s.addParameter("ReleaseFlag","1");}if(p.semanticAttributes.Direction){if(p.semanticAttributes.Direction==="+"){s.addParameter("InflowIndicator","2");}else{s.addParameter("InflowIndicator","3");}}if(s.getParameter("BankAccountGroup")&&t.SortOrder!=undefined){p.semanticAttributes.sortid=t.SortOrder;}else if(p.semanticAttributes.sortid){if(p.semanticAttributes.newDataNode===true){var l=p.semanticAttributes.sortid.lastIndexOf(".");p.semanticAttributes.sortid=p.semanticAttributes.sortid.substring(0,l);}}},addMoreNavParametersBACC:function(p,s){if(p.semanticAttributes.Bank){p.semanticAttributes.BankInternalId=p.semanticAttributes.Bank;}if(p.semanticAttributes.AccId){p.semanticAttributes.BankAccountInternalID=p.semanticAttributes.AccId;}p.semanticAttributes.BankAccountRevision="0000";p.semanticAttributes.DraftUUID="00000000-0000-0000-0000-000000000000";p.semanticAttributes.IsActiveEntity=true;},addCurrency:function(s,p,t){var i=t.getView().getModel("Scaling").getData().isBankCurrency;if(t.sHierType==="BKH"){i="X";}if(i==="X"){if(!s.getSelectOption("BankAccountCurrency")){if(p.semanticAttributes.BankAccountCurrency){s.addParameter("BankAccountCurrency",p.semanticAttributes.BankAccountCurrency);}else if(p.semanticAttributes.Currency){s.addParameter("BankAccountCurrency",p.semanticAttributes.Currency);}}}else{if(!s.getSelectOption("Currency")){if(p.semanticAttributes.BankAccountCurrency){if(i==="L"){s.addParameter("LocalCurrency",p.semanticAttributes.BankAccountCurrency);}else{s.addParameter("Currency",p.semanticAttributes.BankAccountCurrency);}}else if(p.semanticAttributes.Currency){if(i==="L"){s.addParameter("LocalCurrency",p.semanticAttributes.Currency);}else{s.addParameter("Currency",p.semanticAttributes.Currency);}if(s.getSelectOption("BankAccountCurrency")){s.removeSelectOption("BankAccountCurrency");}}else if(s.getSelectOption("BankAccountCurrency")){var b=s.getSelectOption("BankAccountCurrency");if(i==="L"){s.massAddSelectOption("LocalCurrency",b);}else{s.massAddSelectOption("Currency",b);}if(s.getSelectOption("BankAccountCurrency")){s.removeSelectOption("BankAccountCurrency");}}if(p.semanticAttributes.BankAccountCurrency!==""&&p.semanticAttributes.BankAccountCurrency!==undefined){delete p.semanticAttributes.BankAccountCurrency;if(s.getSelectOption("BankAccountCurrency")){s.removeSelectOption("BankAccountCurrency");}}}else if(p.semanticAttributes.BankAccountCurrency){if(i==="L"){s.addParameter("LocalCurrency",p.semanticAttributes.BankAccountCurrency);}else{s.addParameter("Currency",p.semanticAttributes.BankAccountCurrency);}delete p.semanticAttributes.BankAccountCurrency;}}},deriveLiquidityItem:function(s,p,t){if(t.getView().getViewName()==="fin.cash.flow.analyzer.view.LiquidityItemHierarchy"){if(p.semanticAttributes.IsData!=="X"){var l=s.getValue("LiquidityItem");if(l){s.removeSelectOption("LiquidityItem");}}else{if(p.semanticAttributes.LiquidityItem==="#EMPTY"){p.semanticAttributes.LiquidityItem="";}}}},addContentToPopOver:function(p,s,t){var f=new sap.ui.layout.form.SimpleForm({ColumnsL:2});f.setLayout("ResponsiveGridLayout");if(t.getView().getViewName()==="fin.cash.flow.analyzer.view.LiquidityItemHierarchy"){var l=new sap.m.Text();var L=t.oResourceBundle.getText("LIQUIDITYITEM");var o=new sap.m.Label({text:L});if(p.semanticAttributes.LiquidityItem){l.setText(p.semanticAttributes.LiquidityItem+": "+p.semanticAttributes.name);}else if(p.semanticAttributes.LiquidityItem===""){l.setText(t.oResourceBundle.getText("NotAssign"));}f.addContent(o);f.addContent(l);}else{var b=new sap.m.Text();var B=t.oResourceBundle.getText("BANKACCOUNTLABEL");var a=new sap.m.Label({text:B});var c="";if(p.semanticAttributes.BankAccountName){c=p.semanticAttributes.BankAccountName;}if(p.semanticAttributes.BankAccount!==""){b.setText(p.semanticAttributes.BankAccount+" "+c);}else if(p.semanticAttributes.BankAccount===""){b.setText(t.oResourceBundle.getText("NotAssign"));}f.addContent(a);f.addContent(b);var C=new sap.m.Text();var d=t.oResourceBundle.getText("COMPANYCODELABEL");var e=new sap.m.Label({text:d});var g="";if(p.semanticAttributes.CompanyCodeName){g=p.semanticAttributes.CompanyCodeName;}if(p.semanticAttributes.CompanyCode){C.setText(p.semanticAttributes.CompanyCode+" "+g);}f.addContent(e);f.addContent(C);}var D=false;var v=t.getView().getModel("Scaling").getData().viewType;if(t.getView().getViewName()==="fin.cash.flow.analyzer.view.Worklist"){var h=t.getView().byId(p.originalId).getBindingContext();var i=h.getObject(h.getPath());if(v===1||i.ViewTypeExt==="2FLOWS"){D=true;}}if(t.getView().getViewName()==="fin.cash.flow.analyzer.view.LiquidityItemHierarchy"){if(p.semanticAttributes.IsData==="X"){D=true;}}if(D===true){var E=new sap.m.Label();f.addContent(E);var T=this;var j=t.oResourceBundle.getText("DETAIL_PAGE_TITLE");var k=new sap.m.Link({text:j,press:function(m){T.onDetailListNaviPressed(p,s,t);}});f.addContent(k);}return f;},onDetailListNaviPressed:function(p,s,t){var o=p.originalId;var a=new S(t.oCurrSmartFilterBar.getDataSuiteFormat());var b;this.addMoreNavParameters(p,a,t);this.addCurrency(a,p,t);this.setDateForDiffPaymentDay(p,a,s,t);this.mapFieldsToCCFI(p,a,s,t);if(t.getView().byId(o)){var c=t.getView().byId(o);var C=c.getBindingContext();b=C.getObject(C.getPath());}else{b=p.semanticAttributes;}delete b.__metadata;t.getOwnerComponent().setSelectionVariant(a);var n={pSelRow:b,pAmount:p.mainNavigation.getText(),pSetting:t.getView().getModel("Scaling").getData()};t.getRouter().navTo("DetailList",{Params:JSON.stringify(n).toBase64URI()});},provideAdditionalParameter:function(a,s,i){var A=[];var t=null;var c=this.getCertaintyLevelDefault();var C="";var e="";jQuery.each(a,function(b,v){var u=v.getHref();if((u.search(/BankAccount-transferFrom\?/)!==-1)&&(u.search(/BankAccount-transferTo\?/)===-1)){t=u.replace("TransferTo=X","TransferTo= ");t=t.replace("AccId=","PayingBankAccountInternalID=");t=t.replace("CompanyCode=","PayingCompanyCode=");if(t.search("HouseBank")!==-1){t=t.replace("HouseBank=","PayingHouseBank=");t=t.replace("HouseBankAccount=","PayingHouseBankAccount=");}else{t=t.replace("BankAccount=","PayingBankAccount=");}v.setHref(t);}if((u.search(/BankAccount-transferTo/)!==-1)){t=u.replace("TransferFrom=X","TransferFrom= ");t=t.replace("AccId=","PayeeBankAccountInternalID=");t=t.replace("CompanyCode=","PayeeCompanyCode=");if(t.search("HouseBank")!==-1){t=t.replace("HouseBank=","PayeeHouseBank=");t=t.replace("HouseBankAccount=","PayeeHouseBankAccount=");}else{t=t.replace("BankAccount=","PayeeBankAccount=");}v.setHref(t);}if((u.search(/BankAccount-createCashRequestReceiving/)!==-1)){s.removeSelectOption("CertaintyLevel");s.removeParameter("CertaintyLevel");e="";jQuery.each(c,function(b,v){C="CertaintyLevel="+v;if((u.search(C)!==-1)){u=u.replace(C,"CertaintyLevel=CSHRQ");e="X";return;}});t=u.replace("CompanyCode=","CashReqCompanyCode=");t=t.replace("AccId=","ReceivingBankAccountIntID=");t=t.replace("BankAccount=","ReceivingBankAccount=");if(e!=="X"){t=t+"&CertaintyLevel=CSHRQ";}v.setHref(t);}if((u.search(/BankAccount-createCashRequestSending/)!==-1)){s.removeSelectOption("CertaintyLevel");s.removeParameter("CertaintyLevel");e="";jQuery.each(c,function(b,v){C="CertaintyLevel="+v;if((u.search(C)!==-1)){u=u.replace(C,"CertaintyLevel=CSHRQ");e="X";return;}});t=u.replace("CompanyCode=","CashReqCompanyCode=");t=t.replace("AccId=","SendingBankAccountIntID=");t=t.replace("BankAccount=","SendingBankAccount=");if(e!=="X"){t=t+"&CertaintyLevel=CSHRQ";}v.setHref(t);}if((u.search(/BankAccount-createMMFCashRequestReceiving/)!==-1)){s.removeSelectOption("CertaintyLevel");s.removeParameter("CertaintyLevel");e="";jQuery.each(c,function(b,v){C="CertaintyLevel="+v;if((u.search(C)!==-1)){u=u.replace(C,"CertaintyLevel=CSHRQ");e="X";return;}});t=u.replace("CompanyCode=","CashReqCompanyCode=");t=t.replace("AccId=","ReceivingBankAccountIntID=");t=t.replace("BankAccount=","ReceivingBankAccount=");if(e!=="X"){t=t+"&CertaintyLevel=CSHRQ";}t=t+"&CashReqInstrCategory=FT";t=t+"&TrsyCshFlowDebtInvmtCode=BORROW";if(i==="X"){t=t.replace("BankAccountCurrency=","TradedCurrency=");}else if(i==="L"){t=t.replace("LocalCurrency=","TradedCurrency=");}else{t=t.replace("Currency=","TradedCurrency=");}v.setHref(t);}if((u.search(/BankAccount-createMMFCashRequestSending/)!==-1)){s.removeSelectOption("CertaintyLevel");s.removeParameter("CertaintyLevel");e="";jQuery.each(c,function(b,v){C="CertaintyLevel="+v;if((u.search(C)!==-1)){u=u.replace(C,"CertaintyLevel=CSHRQ");e="X";return;}});t=u.replace("CompanyCode=","CashReqCompanyCode=");t=t.replace("AccId=","SendingBankAccountIntID=");t=t.replace("BankAccount=","SendingBankAccount=");if(e!=="X"){t=t+"&CertaintyLevel=CSHRQ";}t=t+"&CashReqInstrCategory=FT";t=t+"&TrsyCshFlowDebtInvmtCode=INVEST";if(i==="X"){t=t.replace("BankAccountCurrency=","TradedCurrency=");}else if(i==="L"){t=t.replace("LocalCurrency=","TradedCurrency=");}else{t=t.replace("Currency=","TradedCurrency=");}v.setHref(t);}v.setProperty("target","_blank");v.setProperty("isSuperiorAction",true);});A=a;return A;},provideAdditionalParameterBACC:function(a){var A=[];jQuery.each(a,function(i,v){v.setProperty("target","_blank");});A=a;return A;},removeNotUsedContextNavParameters:function(p){var n="Data";var c="ConvertData";var i=1;var f=n+i.toString();var a=c+i.toString();while(p.semanticAttributes[f]){delete p.semanticAttributes[f];delete p.semanticAttributes[a];i=i+1;f=n+i.toString();a=c+i.toString();}if(p.semanticAttributes.OverDue){delete p.semanticAttributes.OverDue;}if(p.semanticAttributes.ConvertOverDue){delete p.semanticAttributes.ConvertOverDue;}if(p.semanticAttributes.CyclePattern){delete p.semanticAttributes.CyclePattern;}if(p.semanticAttributes.beforeBalance){delete p.semanticAttributes.beforeBalance;}if(p.semanticAttributes.beforeBalanceDsp){delete p.semanticAttributes.beforeBalanceDsp;}if(p.semanticAttributes.transferAmount){delete p.semanticAttributes.transferAmount;}if(p.semanticAttributes.transferAmountDsp){delete p.semanticAttributes.transferAmountDsp;}if(p.semanticAttributes.maxTargetAmount){delete p.semanticAttributes.maxTargetAmount;}if(p.semanticAttributes.minTransferAmount){delete p.semanticAttributes.minTransferAmount;}if(p.semanticAttributes.afterBalance){delete p.semanticAttributes.afterBalance;}if(p.semanticAttributes.afterBalanceDsp){delete p.semanticAttributes.afterBalanceDsp;}},setDateForDiffPaymentDay:function(p,s,o,t){var f=o.getProperty("fieldName");var v=s.getValue("KeyDate");var c=this.getCertaintyLevelDefault();if(v){var V=this.parseNavToValueDate(p,f,v[0].Low,t);if(V&&V.sLow&&V.sHigh){s.addSelectOption("ValueDate","I","BT",V.sLow,V.sHigh);}}if((p.semanticAttributes.ViewTypeExt==="1BEG_BAL")&&(f==="Data1")){if(s.getValue("CertaintyLevel")){s.removeSelectOption("CertaintyLevel");}s.addSelectOption("CertaintyLevel","I","EQ","ACTUAL");return false;}else if(f==="OverDue"){if(!s.getValue("CertaintyLevel")){jQuery.each(c,function(i,d){if(d!=="ACTUAL"){s.addSelectOption("CertaintyLevel","I","EQ",d);}});}else{var a=s.getValue("CertaintyLevel");s.removeSelectOption("CertaintyLevel");jQuery.each(a,function(i,d){if(d.Low!=="ACTUAL"){s.addSelectOption("CertaintyLevel","I","EQ",d.Low);}});}return false;}else{var b=s.getValue("ActualDate");var F=s.getValue("CertaintyLevel");if(b){if(b[0].Low>V.sHigh){if(!F){s.addSelectOption("CertaintyLevel","I","EQ","ACTUAL");}return true;}else if(b[0].Low<V.sHigh){return false;}}else{return false;}}},setOverduePlanningLevel:function(p,s,o,t){var a=t.getView().byId(p.originalId);var c=a.getBindingContext();var b=c.getObject(c.getPath());var f=o.getProperty("fieldName");if(b.ViewTypeExt==="2FLOWS"&&b.DisplayPlanningLevel!==undefined){var d=s.getSelectOption("OverduePlanningLevel");var e=s.getSelectOption("PlanningLevel");if(f==='OverDue'){jQuery.each(d,function(i,v){if(b.DisplayPlanningLevel===v.Low){s.removeSelectOption("OverduePlanningLevel");return;}});if(s.getSelectOption("OverduePlanningLevel")!==undefined){s.removeSelectOption("OverduePlanningLevel");s.addSelectOption("OverduePlanningLevel","I","EQ",b.DisplayPlanningLevel);s.addSelectOption("OverduePlanningLevel","E","EQ",b.DisplayPlanningLevel);}else{s.addSelectOption("OverduePlanningLevel","I","EQ",b.DisplayPlanningLevel);}}else if(f==='Data1'){jQuery.each(d,function(i,v){if(b.DisplayPlanningLevel===v.Low){s.removeSelectOption("OverduePlanningLevel");return;}});if(s.getSelectOption("OverduePlanningLevel")!==undefined){s.removeSelectOption("OverduePlanningLevel");s.addSelectOption("OverduePlanningLevel","I","EQ",b.DisplayPlanningLevel);s.addSelectOption("OverduePlanningLevel","E","EQ",b.DisplayPlanningLevel);}else{s.addSelectOption("OverduePlanningLevel","I","EQ",b.DisplayPlanningLevel);}jQuery.each(e,function(i,v){if(b.DisplayPlanningLevel===v.Low){s.removeSelectOption("PlanningLevel");return;}});if(s.getSelectOption("PlanningLevel")!==undefined){s.removeSelectOption("PlanningLevel");s.addSelectOption("PlanningLevel","I","EQ",b.DisplayPlanningLevel);s.addSelectOption("PlanningLevel","E","EQ",b.DisplayPlanningLevel);}else{s.addSelectOption("PlanningLevel","I","EQ",b.DisplayPlanningLevel);}}else{jQuery.each(e,function(i,v){if(b.DisplayPlanningLevel===v.Low){s.removeSelectOption("PlanningLevel");return;}});if(s.getSelectOption("PlanningLevel")!==undefined){s.removeSelectOption("PlanningLevel");s.addSelectOption("PlanningLevel","I","EQ",b.DisplayPlanningLevel);s.addSelectOption("PlanningLevel","E","EQ",b.DisplayPlanningLevel);}else{s.addSelectOption("PlanningLevel","I","EQ",b.DisplayPlanningLevel);}}}delete p.semanticAttributes.DisplayPlanningLevel;},parseNavToValueDate:function(p,f,v,t){var F=new Date(v);var T=new Date(v);var V={};var o=[];var a=null;o=t.getView().getModel("FieldMapping").oData;o.forEach(function(e,i){if(e.field===f){a=e;return;}});if(t.getView().getViewName()==="fin.cash.flow.analyzer.view.Worklist"||t.getView().getViewName()==="fin.cash.flow.analyzer.view.Worklist_D"){if(t.getView().getModel("Scaling").getData().viewType===1){if(f){F=new Date(a.from);if(a.to.getFullYear()===9999){a.to.setMonth(0);a.to.setDate(1);}T=new Date(a.to);F.toJSON=t.util.convertDateTimeToABAPDateTime;T.toJSON=t.util.convertDateTimeToABAPDateTime;V={sLow:F.toJSON(),sHigh:T.toJSON()};}}else if(t.getView().getModel("Scaling").getData().viewType===0){if(p.semanticAttributes.ViewTypeExt){if(p.semanticAttributes.ViewTypeExt==="2FLOWS"){F=new Date(a.from);if(a.to.getFullYear()===9999){a.to.setMonth(0);a.to.setDate(1);}T=new Date(a.to);if(f==="Data1"){F.setFullYear(1900);F.setMonth(0);F.setDate(1);}F.toJSON=t.util.convertDateTimeToABAPDateTime;T.toJSON=t.util.convertDateTimeToABAPDateTime;V={sLow:F.toJSON(),sHigh:T.toJSON()};}else if(p.semanticAttributes.ViewTypeExt==="1BEG_BAL"){F.setFullYear(1900);F.setMonth(0);F.setDate(1);T.setDate((a.from.getDate()-1));if(f==="OverDue"){T=new Date(F);}F.toJSON=t.util.convertDateTimeToABAPDateTime;T.toJSON=t.util.convertDateTimeToABAPDateTime;V={sLow:F.toJSON(),sHigh:T.toJSON()};}else if(p.semanticAttributes.ViewTypeExt==="3END_BAL"){F.setFullYear(1900);F.setMonth(0);F.setDate(1);if(a.to.getFullYear()===9999){a.to.setMonth(0);a.to.setDate(1);}T=new Date(a.to);F.toJSON=t.util.convertDateTimeToABAPDateTime;T.toJSON=t.util.convertDateTimeToABAPDateTime;V={sLow:F.toJSON(),sHigh:T.toJSON()};}}else{F.setFullYear(1900);F.setMonth(0);F.setDate(1);if(a.to.getFullYear()===9999){a.to.setMonth(0);a.to.setDate(1);}T=new Date(a.to);F.toJSON=t.util.convertDateTimeToABAPDateTime;T.toJSON=t.util.convertDateTimeToABAPDateTime;V={sLow:F.toJSON(),sHigh:T.toJSON()};}}}else if(t.getView().getViewName()==="fin.cash.flow.analyzer.view.LiquidityItemHierarchy"){F=new Date(a.from);T=new Date(a.to);if(f==="ConvertData1"&&!t.FromMainView){F.setFullYear(1900);F.setMonth(0);F.setDate(1);}F.toJSON=t.util.convertDateTimeToABAPDateTime;T.toJSON=t.util.convertDateTimeToABAPDateTime;V={sLow:F.toJSON(),sHigh:T.toJSON()};}else if(t.getView().getViewName()==="fin.cash.flow.analyzer.view.BankAccountHierarchy"){F.setFullYear(1900);F.setMonth(0);F.setDate(1);T=new Date(a.to);F.toJSON=t.util.convertDateTimeToABAPDateTime;T.toJSON=t.util.convertDateTimeToABAPDateTime;V={sLow:F.toJSON(),sHigh:T.toJSON()};}return V;},getCertaintyLevelDefault:function(){var l=["SI_CIT","TRM_D","REC_N","PAY_N","TRM_O","ACTUAL","CMIDOC","FICA","SDSO","MEMO","MMPO","MMPR","MMSA","SDSA","PAYRQ","PYORD","FIP2P","LEASE","PARKED","INTRAM","CSHRQ"];return l;},mapFieldsToCCFI:function(p,s,o,t){var b=s.getValue("BankCountry");if(b){jQuery.each(b,function(i,h){s.addSelectOption("BankCountryKey",h.Sign,h.Option,h.Low,h.High);});}var j=s.getValue("FiDocumentType");if(j){jQuery.each(j,function(i,h){s.addSelectOption("DocType",h.Sign,h.Option,h.Low,h.High);});}var a=s.getValue("ActualDate");var v=s.getValue("KeyDate");s.removeParameter("ActualDate");if(!t.sHierType){var c=t.getView().byId(p.originalId);var C=c.getBindingContext();var d=C.getObject(C.getPath());if(d.ViewTypeExt==="2FLOWS"){var f=null;var e=o.getProperty("fieldName");var F=t.getView().getModel("FieldMapping").oData;F.forEach(function(h,i){if(h.field===e){f=h;return;}});var D=new Date(f.from);D.toJSON=t.util.convertDateTimeToABAPDateTime;var g=D.toJSON();if(a&&a[0].Low>g){s.addSelectOption("ActualDate","I","BT",g,a[0].Low);}else{s.addSelectOption("ActualDate","I","BT",g,g);}}else{if(a&&a[0].Low>v[0].Low){s.addSelectOption("ActualDate","I","BT","1900-01-01T00:00:00.000",a[0].Low);}else{s.addSelectOption("ActualDate","I","BT","1900-01-01T00:00:00.000",v[0].Low);}}}else{if(a&&a[0].Low>v[0].Low){s.addSelectOption("ActualDate","I","BT","1900-01-01T00:00:00.000",a[0].Low);}else{s.addSelectOption("ActualDate","I","BT","1900-01-01T00:00:00.000",v[0].Low);}}},mapFieldsToCashRequest:function(p,s,o,t){var f=[];var F=null;var a=o.getProperty("fieldName");f=t.getView().getModel("FieldMapping").oData;f.forEach(function(e,i){if(e.field===a){F=e;return;}});var v=new Date(F.to);v.toJSON=t.util.convertDateTimeToABAPDateTime;var V=v.toJSON();V=V.substring(0,V.length-1);s.addParameter("CashReqValueDate",V);s.addParameter("TermStartDate",V);}};});
